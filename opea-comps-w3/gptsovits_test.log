2025-03-11 21:21:44,819 - __main__ - INFO - Starting GPT-SoVITS endpoint tests
2025-03-11 21:21:45,362 - __main__ - INFO - Checking prerequisites...
2025-03-11 21:21:45,363 - __main__ - INFO - Checking file: test_assets/archive_jingyuan_1.wav - Not found
2025-03-11 21:21:45,364 - __main__ - INFO - Checking file: GPT_SoVITS/pretrained_models/s1bert25hz-2kh-longer-epoch=68e-step=50232.ckpt - Not found
2025-03-11 21:21:45,365 - __main__ - INFO - Checking file: GPT_SoVITS/pretrained_models/s2G488k.pth - Not found
2025-03-11 21:21:45,365 - __main__ - WARNING - Missing required files: ['test_assets/archive_jingyuan_1.wav', 'GPT_SoVITS/pretrained_models/s1bert25hz-2kh-longer-epoch=68e-step=50232.ckpt', 'GPT_SoVITS/pretrained_models/s2G488k.pth']
2025-03-11 21:21:45,374 - __main__ - WARNING - Some prerequisites are missing but continuing anyway
2025-03-11 21:21:45,375 - __main__ - INFO - Checking if service is available at http://localhost:9880...
2025-03-11 21:21:45,381 - httpx - INFO - HTTP Request: GET http://localhost:9880 "HTTP/1.1 500 Internal Server Error"
2025-03-11 21:21:45,382 - __main__ - INFO - Service responded with status code: 500
2025-03-11 21:21:45,382 - __main__ - INFO - Testing TTS GET endpoint...
2025-03-11 21:21:45,383 - __main__ - INFO - Testing endpoint: GET http://localhost:9880/tts?text=这是一个测试语音合成的例子&text_lang=zh&ref_audio_path=test_assets/archive_jingyuan_1.wav&prompt_lang=zh&prompt_text=测试语音合成&text_split_method=cut5&batch_size=1&media_type=wav&streaming_mode=false
2025-03-11 21:21:45,392 - __main__ - ERROR - Error testing http://localhost:9880/tts?text=这是一个测试语音合成的例子&text_lang=zh&ref_audio_path=test_assets/archive_jingyuan_1.wav&prompt_lang=zh&prompt_text=测试语音合成&text_split_method=cut5&batch_size=1&media_type=wav&streaming_mode=false: Server disconnected without sending a response.
2025-03-11 21:21:45,393 - __main__ - INFO - Testing TTS POST endpoint...
2025-03-11 21:21:45,393 - __main__ - INFO - Testing endpoint: POST http://localhost:9880/tts
2025-03-11 21:21:45,393 - __main__ - INFO - Request data: {"text": "这是一个通过POST请求测试语音合成的例子", "text_lang": "zh", "ref_audio_path": "test_assets/archive_jingyuan_1.wav", "prompt_text": "测试语音合成", "prompt_lang": "zh", "top_k": 5, "top_p": 1.0, "temperature": 1.0, "text_split_method": "cut5", "batch_size": 1, "batch_threshold": 0.75, "split_bucket": true, "speed_factor": 1.0, "media_type": "wav", "streaming_mode": false, "parallel_infer": true, "repetition_penalty": 1.35}
2025-03-11 21:21:45,396 - httpx - INFO - HTTP Request: POST http://localhost:9880/tts "HTTP/1.1 404 Not Found"
2025-03-11 21:21:45,397 - __main__ - INFO - Response status: 404
2025-03-11 21:21:45,398 - __main__ - INFO - Response content type: application/json
2025-03-11 21:21:45,398 - __main__ - ERROR - Error response 404: Binary data (22 bytes)
2025-03-11 21:21:45,399 - __main__ - INFO - Testing model weights endpoints...
2025-03-11 21:21:45,399 - __main__ - INFO - Testing endpoint: GET http://localhost:9880/set_gpt_weights?weights_path=GPT_SoVITS/pretrained_models/s1bert25hz-2kh-longer-epoch=68e-step=50232.ckpt
2025-03-11 21:21:45,402 - httpx - INFO - HTTP Request: GET http://localhost:9880/set_gpt_weights?weights_path=GPT_SoVITS/pretrained_models/s1bert25hz-2kh-longer-epoch=68e-step=50232.ckpt "HTTP/1.1 404 Not Found"
2025-03-11 21:21:45,402 - __main__ - INFO - Response status: 404
2025-03-11 21:21:45,403 - __main__ - INFO - Response content type: application/json
2025-03-11 21:21:45,403 - __main__ - INFO - Response JSON: {"detail": "Not Found"}
2025-03-11 21:21:45,403 - __main__ - ERROR - Error response 404: {'detail': 'Not Found'}
2025-03-11 21:21:45,404 - __main__ - INFO - Testing endpoint: GET http://localhost:9880/set_sovits_weights?weights_path=GPT_SoVITS/pretrained_models/s2G488k.pth
2025-03-11 21:21:45,407 - httpx - INFO - HTTP Request: GET http://localhost:9880/set_sovits_weights?weights_path=GPT_SoVITS/pretrained_models/s2G488k.pth "HTTP/1.1 404 Not Found"
2025-03-11 21:21:45,407 - __main__ - INFO - Response status: 404
2025-03-11 21:21:45,408 - __main__ - INFO - Response content type: application/json
2025-03-11 21:21:45,408 - __main__ - INFO - Response JSON: {"detail": "Not Found"}
2025-03-11 21:21:45,409 - __main__ - ERROR - Error response 404: {'detail': 'Not Found'}
2025-03-11 21:21:45,412 - __main__ - INFO - Test results saved to test_results/gptsovits_test_results.json
2025-03-11 21:21:45,414 - __main__ - INFO - All tests completed
