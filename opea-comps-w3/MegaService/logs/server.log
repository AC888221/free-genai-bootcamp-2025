/app/server.py:423: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("shutdown")
INFO:     Started server process [7]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:9500 (Press CTRL+C to quit)
2025-03-11 04:09:53 [ERROR] megaservice: TTS health check failed: 
2025-03-11 04:09:53 [ERROR] megaservice: TTS health check failed: 
2025-03-11 04:09:53 [ERROR] megaservice: LLM health check failed: All connection attempts failed
2025-03-11 04:09:53 [ERROR] megaservice: LLM health check failed: All connection attempts failed
INFO:     127.0.0.1:44116 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:09:56 [ERROR] megaservice: TTS health check failed: 
2025-03-11 04:09:56 [ERROR] megaservice: TTS health check failed: 
2025-03-11 04:09:56 [ERROR] megaservice: LLM health check failed: All connection attempts failed
2025-03-11 04:09:56 [ERROR] megaservice: LLM health check failed: All connection attempts failed
INFO:     127.0.0.1:32786 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:10:55 [ERROR] megaservice: TTS health check failed: All connection attempts failed
2025-03-11 04:10:55 [ERROR] megaservice: TTS health check failed: All connection attempts failed
2025-03-11 04:10:55 [ERROR] megaservice: LLM health check failed: All connection attempts failed
2025-03-11 04:10:55 [ERROR] megaservice: LLM health check failed: All connection attempts failed
INFO:     127.0.0.1:45600 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:11:16 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:11:16 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:44498 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:44502 - "GET /debug/tts-info HTTP/1.1" 200 OK
2025-03-11 04:11:19 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:11:19 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:44506 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:44514 - "GET /debug/tts-info HTTP/1.1" 200 OK
2025-03-11 04:11:22 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:11:22 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:44520 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:44526 - "GET /debug/tts-info HTTP/1.1" 200 OK
2025-03-11 04:11:33 [INFO] megaservice: [req_1741666293_139967786686544] Received megaservice request
2025-03-11 04:11:33 [INFO] megaservice: [req_1741666293_139967786686544] Received megaservice request
2025-03-11 04:11:33 [INFO] megaservice: [req_1741666293_139967786686544] Request: {'text': 'hello', 'model': 'Qwen/Qwen2.5-0.5B-Instruct', 'voice': 'default', 'generate_audio': True, 'temperature': 0.7, 'max_tokens': 1000}
2025-03-11 04:11:33 [INFO] megaservice: [req_1741666293_139967786686544] Request: {'text': 'hello', 'model': 'Qwen/Qwen2.5-0.5B-Instruct', 'voice': 'default', 'generate_audio': True, 'temperature': 0.7, 'max_tokens': 1000}
2025-03-11 04:11:33 [INFO] llm: [req_1741666293_139967786686544] Sending LLM request
2025-03-11 04:11:33 [INFO] llm: [req_1741666293_139967786686544] Sending LLM request
2025-03-11 04:11:35 [INFO] llm: [req_1741666293_139967786686544] Got LLM response: Hello! How can I assist you today?...
2025-03-11 04:11:35 [INFO] llm: [req_1741666293_139967786686544] Got LLM response: Hello! How can I assist you today?...
2025-03-11 04:11:35 [INFO] megaservice: [req_1741666293_139967786686544] Starting TTS generation
2025-03-11 04:11:35 [INFO] megaservice: [req_1741666293_139967786686544] Starting TTS generation
2025-03-11 04:11:35 [INFO] tts: generate_tts_audio function called
2025-03-11 04:11:35 [INFO] tts: generate_tts_audio function called
2025-03-11 04:11:35 [INFO] megaservice: TTS Request URL: http://tts-gptsovits-service:9088/v1/audio/speech
2025-03-11 04:11:35 [INFO] megaservice: TTS Request URL: http://tts-gptsovits-service:9088/v1/audio/speech
2025-03-11 04:11:35 [DEBUG] megaservice: TTS Request Payload: {'input': 'Hello! How can I assist you today?', 'model': 'microsoft/speecht5_tts', 'voice': 'default', 'response_format': 'mp3', 'speed': 1.0}
2025-03-11 04:11:35 [DEBUG] megaservice: TTS Request Payload: {'input': 'Hello! How can I assist you today?', 'model': 'microsoft/speecht5_tts', 'voice': 'default', 'response_format': 'mp3', 'speed': 1.0}
2025-03-11 04:11:53 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:11:53 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:48060 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:12:04 [ERROR] megaservice: TTS request failed: 
2025-03-11 04:12:04 [ERROR] megaservice: TTS request failed: 
2025-03-11 04:12:04 [ERROR] megaservice: TTS generation failed: 500: TTS request failed: 
2025-03-11 04:12:04 [ERROR] megaservice: TTS generation failed: 500: TTS request failed: 
2025-03-11 04:12:04 [INFO] megaservice: [req_1741666293_139967786686544] Request completed successfully
2025-03-11 04:12:04 [INFO] megaservice: [req_1741666293_139967786686544] Request completed successfully
INFO:     127.0.0.1:56604 - "POST /v1/megaservice HTTP/1.1" 200 OK
2025-03-11 04:12:51 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:12:51 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:36842 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:13:50 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:13:50 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:42422 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:14:49 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:14:49 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:59160 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:15:47 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:15:47 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:47308 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:16:01 [INFO] megaservice: [req_1741666561_139967786689984] Received megaservice request
2025-03-11 04:16:01 [INFO] megaservice: [req_1741666561_139967786689984] Received megaservice request
2025-03-11 04:16:01 [INFO] megaservice: [req_1741666561_139967786689984] Request: {'text': 'hello', 'model': 'Qwen/Qwen2.5-0.5B-Instruct', 'voice': 'default', 'generate_audio': True, 'temperature': 0.7, 'max_tokens': 1000}
2025-03-11 04:16:01 [INFO] megaservice: [req_1741666561_139967786689984] Request: {'text': 'hello', 'model': 'Qwen/Qwen2.5-0.5B-Instruct', 'voice': 'default', 'generate_audio': True, 'temperature': 0.7, 'max_tokens': 1000}
2025-03-11 04:16:01 [INFO] llm: [req_1741666561_139967786689984] Sending LLM request
2025-03-11 04:16:01 [INFO] llm: [req_1741666561_139967786689984] Sending LLM request
2025-03-11 04:16:02 [INFO] llm: [req_1741666561_139967786689984] Got LLM response: Hello! How can I assist you today?...
2025-03-11 04:16:02 [INFO] llm: [req_1741666561_139967786689984] Got LLM response: Hello! How can I assist you today?...
2025-03-11 04:16:02 [INFO] megaservice: [req_1741666561_139967786689984] Starting TTS generation
2025-03-11 04:16:02 [INFO] megaservice: [req_1741666561_139967786689984] Starting TTS generation
2025-03-11 04:16:02 [INFO] tts: generate_tts_audio function called
2025-03-11 04:16:02 [INFO] tts: generate_tts_audio function called
2025-03-11 04:16:02 [INFO] megaservice: TTS Request URL: http://tts-gptsovits-service:9088/v1/audio/speech
2025-03-11 04:16:02 [INFO] megaservice: TTS Request URL: http://tts-gptsovits-service:9088/v1/audio/speech
2025-03-11 04:16:02 [DEBUG] megaservice: TTS Request Payload: {'input': 'Hello! How can I assist you today?', 'model': 'microsoft/speecht5_tts', 'voice': 'default', 'response_format': 'mp3', 'speed': 1.0}
2025-03-11 04:16:02 [DEBUG] megaservice: TTS Request Payload: {'input': 'Hello! How can I assist you today?', 'model': 'microsoft/speecht5_tts', 'voice': 'default', 'response_format': 'mp3', 'speed': 1.0}
2025-03-11 04:16:31 [ERROR] megaservice: TTS request failed: 
2025-03-11 04:16:31 [ERROR] megaservice: TTS request failed: 
2025-03-11 04:16:31 [ERROR] megaservice: TTS generation failed: 500: TTS request failed: 
2025-03-11 04:16:31 [ERROR] megaservice: TTS generation failed: 500: TTS request failed: 
2025-03-11 04:16:31 [INFO] megaservice: [req_1741666561_139967786689984] Request completed successfully
2025-03-11 04:16:31 [INFO] megaservice: [req_1741666561_139967786689984] Request completed successfully
INFO:     127.0.0.1:59386 - "POST /v1/megaservice HTTP/1.1" 200 OK
2025-03-11 04:16:45 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:16:45 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:34400 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:17:43 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:17:43 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:37612 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:18:41 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:18:41 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:55484 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:19:39 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:19:39 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:51350 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:20:38 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:20:38 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:54060 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:21:36 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:21:36 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:43430 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:22:34 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:22:34 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:44462 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:23:33 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:23:33 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:47936 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:24:31 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:24:31 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:48574 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:25:29 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:25:29 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:43574 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:26:28 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:26:28 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:35592 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:27:26 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:27:26 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:43724 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:28:24 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:28:24 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:41900 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:29:22 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:29:22 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:38990 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:30:20 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:30:20 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:42272 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:31:18 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:31:18 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:50202 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:32:16 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:32:16 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:33708 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:33:16 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:33:16 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:49230 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:34:14 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:34:14 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:34094 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:35:12 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:35:12 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:46820 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:36:10 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:36:10 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:37632 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:37:08 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:37:08 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:43146 - "GET /health HTTP/1.1" 200 OK
2025-03-11 04:38:06 [ERROR] megaservice: TTS health check failed with status 405
2025-03-11 04:38:06 [ERROR] megaservice: TTS health check failed with status 405
INFO:     127.0.0.1:50506 - "GET /health HTTP/1.1" 200 OK
